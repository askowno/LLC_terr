"0","## plot the LC by BIOME over time  "
"0","# make data proportional"
"0","options(scipen = 999)"
"0","plot_data <- sa_lc7_rall %>%"
"0","  filter(YEAR != 1750, BIOME != ""NOTVEG"") %>%"
"0","  group_by(BIOME, YEAR, LC7_text) %>%"
"0","  summarise(total_km2 = sum(km2),.groups = 'drop') %>%"
"0","    group_by(YEAR,BIOME) %>%"
"0","  mutate(proportion = total_km2 / sum(total_km2)) "
"0",""
"0","# set colours for each LC class in the plot"
"0","lc_colors <- c("
"0","  ""Artificial-waterbody"" = ""blue"","
"0","  ""Natural"" = ""darkgreen"","
"0","  ""Built-up"" = ""black"","
"0","  ""Cropland"" = ""brown"","
"0","  ""Mine"" = ""red"","
"0","  ""Plantation"" = ""purple"","
"0","  ""Secondary-natural"" = ""orange"""
"0",")"
"0"," "
"0","# set the order for the legend"
"0","lc_order <- c(""Mine"", ""Built-up"", ""Artificial-waterbody"", ""Cropland"", ""Plantation"",""Secondary-natural"",""Natural"")                "
"0","plot_data$LC7_text <- factor(plot_data$LC7_text, levels = lc_order) # this helps set the order"
"0",""
"0","plot <- ggplot(plot_data, aes(x = as.factor(YEAR), y = proportion, fill = (LC7_text))) +"
"0","  geom_bar(stat = ""identity"", position = ""stack"") +  # Stacked bar chart"
"0","  scale_fill_manual(values = lc_colors) + "
"0","  facet_wrap(~ BIOME, ncol = 5) +"
"0","  theme_minimal() +"
"0","  labs("
"0","    title = ""Proportional Extent of Land Cover Classes by Biome and Year"","
"0","    x = ""Year"","
"0","    y = ""Proportional Extent"","
"0","    fill = ""Land Cover Class"""
"0","  ) +"
"0","  theme(axis.text.x = element_text(angle = 45, hjust = 1),"
"0","        strip.text = element_text(size = 10),"
"0","        legend.position = ""bottom"","
"0","        legend.text = element_text(size=7)) "
"0",""
"0","#export the graph"
"0","ggsave("
"0","  filename = ""land_cover_biome_year_plot_sa_only.jpeg"", # File name"
"0","  plot = plot,                            # Plot object"
"0","  device = ""jpeg"",                        # File format"
"0","  width = 16, height = 12, units = ""cm"",   # Dimensions"
"0","  dpi = 300                               # Resolution"
"0",")"
